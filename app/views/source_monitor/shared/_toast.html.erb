<% level_key = local_assigns.fetch(:level, :info).to_s %>
<% delay_ms = local_assigns.fetch(:delay_ms, 5000) %>
<% title = local_assigns[:title] %>
<% message = local_assigns[:message] %>
<% palette = {
     "success" => "border-emerald-200 bg-emerald-50 text-emerald-800",
     "error" => "border-rose-200 bg-rose-50 text-rose-800",
     "info" => "border-blue-200 bg-blue-50 text-blue-800",
     "warning" => "border-amber-200 bg-amber-50 text-amber-800"
   } %>
<% classes = palette.fetch(level_key, palette["info"]) %>

<div
  data-controller="notification"
  data-notification-delay-value="<%= delay_ms %>"
  data-level="<%= level_key %>"
  class="pointer-events-auto w-full max-w-md rounded-lg border px-4 py-3 shadow-lg transition duration-300 <%= classes %>"
>
  <div class="flex items-start justify-between gap-3">
    <div class="flex-1">
      <% if title.present? %>
        <p class="text-sm font-semibold"><%= title %></p>
      <% end %>
      <p class="mt-1 text-sm leading-snug"><%= message %></p>
    </div>
    <button
      type="button"
      class="text-xs font-semibold uppercase tracking-wide opacity-60 transition hover:opacity-100"
      data-action="notification#hide"
      aria-label="Dismiss notification"
    >
      Close
    </button>
  </div>
</div>
